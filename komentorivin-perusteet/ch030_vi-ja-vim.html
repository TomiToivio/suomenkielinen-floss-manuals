<div id="main-content"><h1>Vi ja Vim</h1>
<p>Vi on erittäin tehokas komentorivin tekstieditori. Sitä käytetään mihin tahansa nopeista konfiguraatiotiedostojen korjauksista ammattimaiseen ohjelmointiin ja jopa suurten ja monimutkaisten dokumenttien kirjoittamiseen. Se on suosittu, koska se on nopea ja kevyt ohjelma, ja voit tehdä sillä monia asioita muutamalla näppäimen painalluksella. Toisaalta se on myös tehokas: erittäin helposti konfiguroitava ja siinä on paljon sisäänrakennettuja toimintoja.</p>
<p>Vim on kehittyneempi versio ohjelmasta Vi, se tarjoaa ominaisuuksia, jotka helpottavat sekä aloittelijan että asiantuntijan työskentelyä (Vim tarkoittaa <em>"Vi IMproved"</em>). Monissa nykyaikaisissa järjestelmissä Vim on asennettu Vi-ohjelman oletusarvoisena versiona. Jos siis käytät komentoa <code><span style="font-size: small;">vi</span></code>, ajat itse asiassa ohjelman Vim. Tämä ei yleensä ole hämmentävää, sillä kaikki Vin ominaisuudet voimivat myös Vimissä. Katsomme tässä luvussa Vimiä, mutta jos järjestelmässäsi on Vi, voit käyttää samoja tekniikoita, kunhan korvaat kaikki viittaukset komentoon <code><span style="font-size: small;">vim</span></code> viittauksilla komentoon <code><span style="font-size: small;">vi</span></code>.</p>
<p>Paras ominaisuus ohjelmassa Vim/Vi on, että se on oletusarvoisesti mukana miltei kaikissa  GNU/Linuxin versioissa. Kun opit Vimin, voit käyttää sitä missä tahansa oletkin. </p>
<p>Vimin suurin ongelma on, että samoin kuin Emacsissa (toinen komentorivin editori), sen oppimiskäyrä on vaikea. Näppäimistön pikakomentoja voi olla vaikea oppia.</p>
<p>Onneksi voit kiertää nämä ongelmat käyttämällä Vimin graafista versiota GVim, jossa kaikki nappulat ja valikot ovat tarjolla graafisemmille käyttäjille. Voit kokeilla myös ohjelmaa easy-Vim, joka tarjoaa Notepad-tyylistä editointia.</p>
<p>Nämä Vimin yksinkertaistetut versiot helpottavat oppimiskäyrää paljon ja näyttävät vähemmän kehittyneille käyttäjille tehokkaan editoinnin voiman, mikä puolestaan lisää tahtoa opetella tehokkaamman editorin käyttö. </p>
<h2>Peruskomennot</h2>
<p>Avataksesi Vimin ja aloittaaksesi uuden tekstitiedoston muokkaamisen, avaa komentorivi ja kirjoita:</p>
<pre>$ <strong>vim</strong></pre>
<p> </p>
<p>Tämä näyttää sinulle tyhjän ruudun, tai tällaisen ruudun, jolla on tietoa:</p>
<p><img title="vim_en" src="_booki/komentorivin-perusteet/static/KomentorivinPerusteet-ViAndVim-vim_en-fi.png" alt="vim_en" width="507" height="366"></p>
<p>Jos tahdot avata olemassaolevan tiedoston, kirjoita se parametriksi komentoriville. Esimerkiksi seuraava avaa tiedoston nimeltä <em>/etc/fstab</em>:</p>
<pre>$ <strong>vim /etc/fstab</strong></pre>
<p> </p>
<p>Tämä tiedosto on jo olemassa useimmissa GNU/Linux -järjestelmissä, mutta jos avaat olemattoman tiedoston, saat tyhjän ruudun. Seuraava osa näyttää sinulle, kuinka tekstiä lisätään; kun olet valmis, voit sitten tallentaa tiedoston.</p>
<h3>Tekstin lisääminen</h3>
<p>Olitpa sitten tyhjässä ruudussa tai tiedostossa, jossa on tekstiä, voit lisätä tekstiä <em>muokkaustilassa</em>. Paina vain <strong>i</strong>. Sinun pitäisi nähdä tämä ruudun alaosassa:</p>
<pre>-- INSERT --
</pre>
<p>Kun tämä näkyy ruudun alaosassa, olet muokkaustilassa. Mitä tahansa kirjoitatkin tulee osaksi tiedostoa. Yritä esimerkiksi kirjoittaa  "This is line 1." Paina sitten näppäintä <strong>Enter</strong> ja kirjoita "This is line 2". Tältä tämä ällistyttävä lisä maailmankirjallisuuteen näyttää Vimissä:</p>
<p><img title="vim_insert_en" src="_booki/komentorivin-perusteet/static/KomentorivinPerusteet-ViAndVim-vim_insert_en-fi.png" alt="vim_insert_en" width="507" height="366"></p>
<p>Kun olet lopettanut tekstin lisäämisen, paina näppäintä <strong>Esc</strong> (Escape) päästäksesi pois muokkaustilasta; tämä laittaa sinut normaaliin tilaan.</p>
<h3>Vain yhdessä paikassa samaan aikaan: kursori</h3>
<p>Vim, kuten mikä tahansa tekstieditori, pitää kirjaa sijainnistasi ja näyttää kohdistimen siinä paikassa. Se voi näyttää alleviivaukselta tai eriväriseltä laatikolta. Editointitilassa voit käyttää poistonäppäintä poistamaan merkkejä. Vim tarjoaa myös mahdollisuuden siirtyä ympäriinsä käyttäen nuolinäppäimiä ja editoida koko dokumenttia. Normaali Vi ei anna sinun liikkua ympäriinsä; se rajoittaa sinut lisäämään tekstiä tai poistamaan sitä.</p>
<p>Normaalissa Vissä, jos tahdot mennä takaisin muokkaamasi tekstin yli, tai siirtyä toiseen paikkaan tiedostossa, joudut painamaan näppäintä <strong>Esc</strong>, siirtymään takaisin paikkaan, johon tahdot lisätä tekstiä, ja siirtymään takaisin editointitilaan. Tämä voi vaikuttaa vaikealta. Mutta Vi tarjoaa niin monta tapaa siirtyä ympäriinsä ja lisätä tekstiä, että pienellä harjoittelulla huomaat, että se ei ole mikään este tuottavuudelle. Kuten aiemmin on mainittu, Vim antaa sinun liikkua ympäriinsä vapaasti ja muokata koko tiedostoa, kun olet editointitilassa - mutta huomaat lähteväsi usein editointitilasta käyttääksesi Vimin tehokkaita komentoja.</p>
<h3>Perusliikekomennot </h3>
<p>Harjoitellaksesi tiedostossa liikkumista, voit painaa näppäintä <strong>Esc</strong> päästäksesi pois editointitilasta. Jos sinulla on vain vähän tekstiä tiedostossa, voit tahtoa löytää toisen tiedoston järjestelmästäsi, joka on pidempi, ja avata sen. Muista että avatessasi tiedoston olet normaalissa tilassa, et editointitilassa.</p>
<p>Käytä nuolinäppäimiä siirtyäksesi ympäriinsä.</p>
<p>Hypätäksesi tietylle riville, paina kaksoispistettä ja kirjoita sen jälkeen rivinumero. Seuraava komento hyppää riville 20:</p>
<pre><strong>:20</strong>
</pre>
<p>Voit siirtyä nopeasti ylös ja alas tekstitiedostossa painamalla näppäimiä <strong>PgUp</strong> ja <strong>PgDn</strong>.</p>
<p>Etsi tekstiä painamalla kauttaviivaa (/) ja kirjoittamalla teksti, jonka tahdot löytää:</p>
<pre><strong>/birthday party</strong></pre>
<p>Voit yksinkertaisesti käyttää näppäintä <strong>/</strong> uudestaan etsiäksesi merkkijonon seuraavan toistumakerran. Etsiäksesi taaksepäin, käytä kysymysmerkkiä (?) kauttaviivan sijasta.</p>
<h3>Tallentaminen ja poistuminen</h3>
<p>Jos olet editointitilassa, voit tallentaa muutoksesi painamalla näppäintä <strong>Esc</strong> mennäksesi normaalitilaan, kirjoittaa <strong>:w</strong> ja painaa näppäintä <strong>Enter</strong>. Tämä tallentaa muutokset tiedostoon, joka on määritelty avatessasi Vimin.</p>
<blockquote>
<p>Huomaa: Vim ei oletusarvoisesti tallenna tiedoston alkuperäisen version varmuuskopioita. Komento <strong>:w</strong> poistaa kuitenkin vanhan sisällön. Vim voidaan kuitenkin konfiguroida tallentamaan varmuuskopiot. </p>
</blockquote>
<p>Jos avasit Vimin määrittelemättä tiedostonimeä, saat virheviestin, kun painat näppäintä <strong>:w</strong>:</p>
<pre>E32: No file name</pre>
<p>Kirjataksesi tämän, määrittele komennolle <strong>:w</strong> tiedostonimi:</p>
<pre><strong>:w</strong> <em><strong>testitiedostoni.txt</strong></em></pre>
<p>Tämän jälkeen tarvitsee painaa näppäintä <strong>Enter</strong>.</p>
<p>Poistuaksesi Vimistä, painta <strong>:q</strong>. Jos sinulla on tallentamatonta tekstiä, saat virheviestin:</p>
<pre>E37: No write since last change (add ! to override)</pre>
<p>Kuten useimmat tekstieditorit, Vim yrittää varoittaa, mikäli olet tekemässä virheen, joka voi tuhota työsi. Kuten viesti huomauttaa, voit hylätä tekstisi ja poistua painamalla<strong> :q!</strong>. Tai käytä komentoa <strong>:w</strong> tallentaaksesi muutoksesi ja paina sitten uudestaan <strong>:q!</strong>.<strong> </strong>Voit yhdistää kirjoittamisen ja poistumisen millä tahansa seuraavista:</p>
<pre><strong>:wq</strong> (jonka jälkeen Enter)
<strong>:x</strong> (jonka jälkeen Enter)
<strong>ZZ</strong></pre>
<h3>Hiiren käyttö Vimissä</h3>
<p>Joskus on kätevää käyttää hiirtä Vimissä, jotta voit valita tekstiä ja siirtää nopeasti kursorin toiseen paikkaan. Saadaksesi tämän tilan käyttöön, anna Vimille komento:</p>
<pre><strong>:set mouse=a</strong> (jota seuraa Enter)
</pre>
<h3>Useiden tiedostojen avaaminen samaan aikaan</h3>
<p>Version 7 jälkeen Vimissä on ollut (harvoin huomattu) mahdollisuus käyttää välilehtiä, aivan kuin Firefoxissa tai muissa välilehtiä käyttävissä ohjelmissa.</p>
<p>Käyttääksesi välilehtiä Vimissä kirjoita komento :tabnew &lt;tiedosto&gt;. Esimerkiksi tiedosto foo.txt välilehteen tarvitaan komento: </p>
<pre><strong>:tabnew /path/to/foo.txt</strong> (jota seuraa Enter)
</pre>
<p>Siirtyäksesi edestakaisin tämän tiedoston ja sen tiedoston välillä, jonka parissa työskentelit viimeksi, käytä näppäimiä <strong>g</strong> ja sitten <strong>t</strong>. Voit avata välilehtiin niin monta tiedostoa kuin tahdot ja käyttää sitten komentoa <strong>gt </strong>siirtyäksesi niiden välillä. Jos olet laittanut päälle hiiren käytön (katso "Hiiren käyttö Vimissä" yläpuolella), voit yksinkertaisesti napsauttaa välilehteä.</p>
<p>Voit sulkea välilehden samoin kuin tekisit normaalille tiedostolle, käytä komentoa <strong>:wq</strong> tallentaaksesi muutokset, tai komentoa <strong>:q</strong> lopettaaksesi ilman tallennusta. </p>
<h3>Kopioi, leikkaa ja liitä (nopea visuaalisen tilan esittely)</h3>
<p>Vim käyttää tilaa jota kutsutaan <em>visuaaliseksi </em>valitsemaan tekstiä kopioitavaksi "puskuriin" (ajattele puskuria leikepöytänä), jota voidaan käyttää muualla.</p>
<p>Aktivoidaksesi visuaalisen tilan voit painaa näppäintä <strong>v</strong> ja painaa rivinvaihtoa. Kursorinäppäinten (nuolinäppäinten) avulla voit valita tekstin, jonka tahdot kopioida tai leikata. <br><br>Kopioidaksesi valitun tekstin, paina näppäintä <strong>y</strong>. Käytä nyt nuolinäppäimiä siirtyäksesi uuteen paikkaan tekstissäsi. Paina nyt näppäintä <strong>p</strong> laittaaksesi tekstin uuteen sijaintiin.</p>
<p>Leikataksesi valitun tekstin, paina näppäintä <strong>x</strong>. Siirry nyt uuteen sijantiin dokumentissasi ja paina <strong>p</strong> laittaaksesi tekstin siihen paikkaan.</p>
<p>Joskus on hyvä valita tekstiä riveissä tai pylväissä. Kokeile näitä visuaalisen tilan toimintoja painamalla näppäimiä <strong>SHIFT+v</strong> valitaksesi kokonaisia rivejä tai <strong>CTRL+v</strong> valitaksesi pylväitä. Ennen kuin huomaatkaan voit työskennellä yhtä nopeasti kuin työskentelisit hiirellä tekstinkäsittelyohjelmassa!</p>
<p>Harjoittele!</p></div><ul Class="menu-goes-here"><li Class="booki-section">Johdanto</li><li><a href="/komentorivin-perusteet/index">Ota komento</a></li>
<li Class="booki-section">Perusteet</li><li><a href="/komentorivin-perusteet/ch003_aloittaminen">Käytön aloittaminen</a></li>
<li><a href="/komentorivin-perusteet/ch004_syntaksi">Syntaksi</a></li>
<li><a href="/komentorivin-perusteet/ch005_ympariinsa-siirtyminen">Ympäriinsä siirtyminen</a></li>
<li><a href="/komentorivin-perusteet/ch006_tiedostorakenne">Tiedostorakenne</a></li>
<li Class="booki-section">Komennot</li><li><a href="/komentorivin-perusteet/ch008_peruskomennot">Peruskomennot</a></li>
<li><a href="/komentorivin-perusteet/ch009_jarjestelmanvalvojat">Järjestelmänvalvoja</a></li>
<li><a href="/komentorivin-perusteet/ch010_useammat-tiedostot">Useammat tiedostot</a></li>
<li><a href="/komentorivin-perusteet/ch011_kirjoita-vahemman">Kirjoita vähemmän</a></li>
<li Class="booki-section">Keskivaikeita komentoja</li><li><a href="/komentorivin-perusteet/ch013_putkitus">Putkitus</a></li>
<li><a href="/komentorivin-perusteet/ch014_komentohistoria">Komentohistoria</a></li>
<li><a href="/komentorivin-perusteet/ch015_standarditiedostot">Standarditiedostot</a></li>
<li Class="booki-section">Kehittyneempiä komentoja</li><li><a href="/komentorivin-perusteet/ch017_kayttooikeudet">Käyttöoikeudet</a></li>
<li><a href="/komentorivin-perusteet/ch018_interaktiivinen-muokkaus">Interaktiivinen muokkaus</a></li>
<li><a href="/komentorivin-perusteet/ch019_poistumisen-tarkastaminen">Poistumisen tarkastaminen</a></li>
<li><a href="/komentorivin-perusteet/ch020_alikomennot">Alikomennot</a></li>
<li><a href="/komentorivin-perusteet/ch021_hakemistot">Hakemistot</a></li>
<li><a href="/komentorivin-perusteet/ch022_kustomisointi">Kustomisointi</a></li>
<li><a href="/komentorivin-perusteet/ch023_parametrien-korvaaminen">Parametrien korvaaminen</a></li>
<li><a href="/komentorivin-perusteet/ch024_gnuscreen">GNUScreen</a></li>
<li><a href="/komentorivin-perusteet/ch025_ssh">SSH</a></li>
<li><a href="/komentorivin-perusteet/ch026_ohjelmien-asentaminen">Ohjelmien asentaminen</a></li>
<li Class="booki-section">Tekstieditorit</li><li><a href="/komentorivin-perusteet/ch028_tekstieditorit">Tekstieditorit</a></li>
<li><a href="/komentorivin-perusteet/ch029_nano">Nano</a></li>
<li><a href="/komentorivin-perusteet/ch030_vi-ja-vim">Vi ja Vim</a></li>
<li><a href="/komentorivin-perusteet/ch031_emacs">Emacs</a></li>
<li><a href="/komentorivin-perusteet/ch032_kedit">Kedit</a></li>
<li><a href="/komentorivin-perusteet/ch033_gedit">Gedit</a></li>
<li Class="booki-section">Skriptaus</li><li><a href="/komentorivin-perusteet/ch035_skriptaus">Skriptaus</a></li>
<li><a href="/komentorivin-perusteet/ch036_skriptien-huoltaminen">Skriptien huoltaminen</a></li>
<li><a href="/komentorivin-perusteet/ch037_muut-kielet">Muut kielet</a></li>
<li><a href="/komentorivin-perusteet/ch038_sed">Sed</a></li>
<li><a href="/komentorivin-perusteet/ch039_awk">AWK</a></li>
<li><a href="/komentorivin-perusteet/ch040_saannolliset-lausekkeet">Säännölliset lausekkeet</a></li>
<li><a href="/komentorivin-perusteet/ch041_perl">Perl</a></li>
<li><a href="/komentorivin-perusteet/ch042_ruby">Ruby</a></li>
<li><a href="/komentorivin-perusteet/ch043_python">Python</a></li>
<li Class="booki-section">Komennot nopeasti</li><li><a href="/komentorivin-perusteet/ch045_komentojen-pikaopas">Komentojen pikaopas</a></li>
<li Class="booki-section">Liitteet</li><li><a href="/komentorivin-perusteet/ch047_tasta-kayttooppaasta">Tästä käyttöoppaasta</a></li>
<li><a href="/komentorivin-perusteet/ch048_tekijat">Tekijät</a></li>
</ul>